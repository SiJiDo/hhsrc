{% extends "base.html" %}

{% block title %}通知方式配置{% endblock %}


{% block navbar %}
<section class="content-header">
    <h1>目标总览</h1>
    <ol class="breadcrumb">
        <li><i class="fa fa-dashboard"></i> 当前位置</li>
        <li class="active">目标管理</li>
        <li class="active">目标总览</li>
    </ol>
</section>
{% endblock %}


{% block content %}
<div class="box box-primary">
    <div class="box-header with-border">
        {% include 'message.html' %}
    </div>
    <div class="box-body">
        <div class="col-md-7"></div>
        <div class="col-md-5">
            <form action="" method="GET">
            <div class="form-group form-inline">
                <input type="text" class="form-control" style="width: 380px" name="search" />
                <input type="submit" class="btn btn-primary pull-right" value="搜索" />
            </div>
        </form>
        </div>
    </div>
    <div class="box-body">
        {% if form%}
        <table class="table table-bordered">
            <tr>
                <th>目标名称</th>
                <th>目标域名数</th>
                <th>目标子域数</th>
                <th>目标端口数</th>
                <th>目标站点数</th>
                <th>扫描状态</th>
                <th>是否周期扫描</th>
                <th>更新时间</th>
                <th>编辑</th>
                <th>删除</th>
            </tr>
            {% for row in form.content %}
            <tr>
                <td><a href="/targetinfo?id={{row.id}}">{{row.target_name}}</a></td>
                <td>{{row.domain_total_count}}</td>
                <td>{{row.subdomain_total_count}}</td>
                <td>{{row.port_total_count}}</td>
                <td>{{row.url_total_count}}</td>
                <td>{% if row.target_status == 2 %}扫描完成{% elif row.target_status == 1 %}扫描中{% else %}未扫描{% endif %}</td>
                <td>{% if row.target_corn == true %}是{% else %}否{% endif %}</td>
                <td>{{row.target_time}}</td>
                <td><a class='fa fa-lg fa-edit text-light-blue'
                       href='{{ url_for("target.targetedit", id=row.id) }}'></a></td>
                <td><a class='fa fa-lg fa-warning text-red' href='?action=del&id={{row.id}}'></a></td>
            </tr>
            {% endfor %}
        </table>
        {% endif %}
    </div>

    <div class="box-footer clearfix">
        <div class="col-md-5"></div>
        <div class="col-md-5">
        {% if form%}
        <ul class="pagination pagination-sm no-margin pull-right">
            <li><a href="?page={{1}}&search={{form.search}}">&laquo;</a></li>
            {% if form.page <= 10 %}
                {% if form.total_page >= 10 %}
                {% for i in range(1, 11) %}
                {% if i == form.page %}
                <li><a href="?page={{i}}&search={{form.search}}"><b>{{i}}</b></a></li>
                {% else %}
                <li><a href="?page={{i}}&search={{form.search}}">{{i}}</a></li>
                {% endif %}
                {% endfor %}
                {% else %}
                {% for i in range(1, form.total_page + 1) %}
                {% if i == form.page %}
                <li><a href="?page={{i}}&search={{form.search}}"><b>{{i}}</b></a></li>
                {% else %}
                <li><a href="?page={{i}}&search={{form.search}}">{{i}}</a></li>
                {% endif %}
                {% endfor %}
                {% endif %}

            {% elif form.page <= form.total_page and form.page >= form.total_page - 5 %}
                {% if form.page <= 10 %}
                    {% for i in range(1, form.total_page + 1) %}
                    {% if i == form.page %}
                    <li><a href="?page={{i}}&search={{form.search}}"><b>{{i}}</b></a></li>
                    {% else %}
                    <li><a href="?page={{i}}&search={{form.search}}">{{i}}</a></li>
                    {% endif %}
                    {% endfor %}
                {% else %}
                    {% for i in range(form.page - 10, form.total_page + 1) %}
                    {% if i == form.page %}
                    <li><a href="?page={{i}}&search={{form.search}}"><b>{{i}}</b></a></li>
                    {% else %}
                    <li><a href="?page={{i}}&search={{form.search}}">{{i}}</a></li>
                    {% endif %}
                    {% endfor %}
                {% endif %}

            {% else %}
            {% for i in range(form.page - 5, form.page + 5) %}
            {% if i == form.page %}
            <li><a href="?page={{i}}&search={{form.search}}"><b>{{i}}</b></a></li>
            {% else %}
            <li><a href="?page={{i}}&search={{form.search}}">{{i}}</a></li>
            {% endif %}
            {% endfor %}
            {% endif %}
            <li><a href="?page={{form.total_page}}&search={{form.search}}">&raquo;</a></li>
        </div>
        <div class="col-md-2">
                <form role="form" class="form-inline">
                      <label for="name">页码</label>
                      <input type="text" class="form-control" id="name" name="page" style="width: 50px; height: 30px;" placeholder="">
                        <input type="hidden" name="search" value="{{form.search}}" />
                    <button type="submit" class="btn btn-default" style="width: 50px; height: 30px;">跳转</button>
            </form>
        </div>
        </ul>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>

</script>
{% endblock %}